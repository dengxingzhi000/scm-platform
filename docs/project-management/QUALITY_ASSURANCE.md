# è´¨é‡ä¿è¯è®¡åˆ’ (Quality Assurance Plan)

> **å‚è€ƒæ ‡å‡†**: Google SRE + é˜¿é‡Œè´¨é‡ä½“ç³» + ISO 25010
> **è´¨é‡è´Ÿè´£äºº**: æµ‹è¯•ç»„é•¿
> **ç›®æ ‡**: ç¡®ä¿ SCM Platform è¾¾åˆ°ç”Ÿäº§çº§è´¨é‡æ ‡å‡†

---

## 1. è´¨é‡ç›®æ ‡

### 1.1 é‡åŒ–æŒ‡æ ‡

| ç»´åº¦ | æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰å€¼ | çŠ¶æ€ |
|-----|------|--------|--------|------|
| **ä»£ç è´¨é‡** | å•å…ƒæµ‹è¯•è¦†ç›–ç‡ | > 80% | 0% | ğŸ”´ æœªè¾¾æ ‡ |
| **ä»£ç è´¨é‡** | åˆ†æ”¯è¦†ç›–ç‡ | > 70% | 0% | ğŸ”´ æœªè¾¾æ ‡ |
| **ä»£ç è´¨é‡** | SonaræŠ€æœ¯å€º | < 5å¤© | - | â³ å¾…æµ‹é‡ |
| **Bugå¯†åº¦** | ç¼ºé™·æ•°/KLOC | < 0.5 | - | â³ å¾…æµ‹é‡ |
| **æ€§èƒ½** | P99å»¶è¿Ÿ | < 100ms | - | â³ å¾…æµ‹è¯• |
| **æ€§èƒ½** | QPS | > 100,000 | - | â³ å¾…æµ‹è¯• |
| **å¯ç”¨æ€§** | Uptime | > 99.9% | - | â³ å¾…éƒ¨ç½² |
| **å®‰å…¨** | é«˜å±æ¼æ´ | 0 | - | â³ å¾…æ‰«æ |

---

## 2. æµ‹è¯•ç­–ç•¥

### 2.1 æµ‹è¯•é‡‘å­—å¡”

```
           E2E Tests (5%)
              /\
             /  \
            /    \
    Integration  (15%)
         /\
        /  \
       /    \
    Unit Tests (80%)
```

**æ¯”ä¾‹**:
- å•å…ƒæµ‹è¯•: 80% - å¿«é€Ÿåé¦ˆï¼Œå¼€å‘äººå‘˜ç¼–å†™
- é›†æˆæµ‹è¯•: 15% - éªŒè¯æ¨¡å—é—´äº¤äº’ï¼Œæµ‹è¯•äººå‘˜ç¼–å†™
- ç«¯åˆ°ç«¯æµ‹è¯•: 5% - éªŒè¯ä¸šåŠ¡æµç¨‹ï¼Œæµ‹è¯•äººå‘˜ç¼–å†™

### 2.2 æµ‹è¯•ç±»å‹

| æµ‹è¯•ç±»å‹ | ç›®çš„ | å·¥å…· | è´£ä»»äºº | é¢‘ç‡ |
|---------|------|------|--------|------|
| **å•å…ƒæµ‹è¯•** | éªŒè¯å•ä¸ªæ–¹æ³•/ç±» | JUnit 5, Mockito | å¼€å‘äººå‘˜ | æ¯æ¬¡æäº¤ |
| **é›†æˆæµ‹è¯•** | éªŒè¯æ¨¡å—é—´äº¤äº’ | Spring Boot Test | æµ‹è¯•äººå‘˜ | æ¯å¤© CI |
| **APIæµ‹è¯•** | éªŒè¯æ¥å£æ­£ç¡®æ€§ | RestAssured, Postman | æµ‹è¯•äººå‘˜ | æ¯å¤© CI |
| **æ€§èƒ½æµ‹è¯•** | éªŒè¯æ€§èƒ½æŒ‡æ ‡ | JMeter, Gatling | æµ‹è¯•äººå‘˜ | æ¯å‘¨ |
| **å‹åŠ›æµ‹è¯•** | éªŒè¯æé™èƒ½åŠ› | JMeter | æµ‹è¯•äººå‘˜ | Phase 6 |
| **å®‰å…¨æµ‹è¯•** | éªŒè¯å®‰å…¨æ¼æ´ | OWASP ZAP, Sonar | DevOps | æ¯å‘¨ |
| **æ··æ²Œå·¥ç¨‹** | éªŒè¯å®¹é”™èƒ½åŠ› | Chaos Monkey | è¿ç»´ç»„ | æ¯æœˆ |

---

## 3. ä»£ç è´¨é‡ç®¡ç†

### 3.1 ä»£ç å®¡æŸ¥ (Code Review)

**æµç¨‹**:
```
å¼€å‘ â†’ æäº¤PR â†’ è‡ªåŠ¨åŒ–æ£€æŸ¥ â†’ Code Review â†’ åˆå¹¶ â†’ éƒ¨ç½²
                    â†“                â†“
              CI/CD Pipeline    Tech Leadå®¡æ‰¹
              - å•å…ƒæµ‹è¯•
              - Sonaræ‰«æ
              - ä»£ç æ ¼å¼åŒ–
```

**Code Review æ£€æŸ¥é¡¹**:
- [ ] ä»£ç ç¬¦åˆç¼–ç è§„èŒƒ
- [ ] é€»è¾‘æ­£ç¡®ï¼Œæ— æ˜æ˜¾bug
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–å…³é”®è·¯å¾„
- [ ] æ— å®‰å…¨æ¼æ´ï¼ˆSQLæ³¨å…¥ã€XSSç­‰ï¼‰
- [ ] æ€§èƒ½åˆç†ï¼ˆæ— N+1æŸ¥è¯¢ã€å†…å­˜æ³„æ¼ï¼‰
- [ ] å¼‚å¸¸å¤„ç†å®Œå–„
- [ ] æ—¥å¿—è®°å½•åˆç†
- [ ] æ–‡æ¡£æ³¨é‡Šæ¸…æ™°

**å®¡æ‰¹è§„åˆ™**:
- è‡³å°‘ 1 äººå®¡æ‰¹é€šè¿‡
- Tech Lead å®¡æ‰¹é€šè¿‡ï¼ˆæ ¸å¿ƒæ¨¡å—ï¼‰
- æ‰€æœ‰ CI æ£€æŸ¥é€šè¿‡

### 3.2 é™æ€ä»£ç åˆ†æ (SonarQube)

**è´¨é‡é—¨ç¦ (Quality Gate)**:
```yaml
# SonarQube è´¨é‡é—¨ç¦é…ç½®
conditions:
  - metric: coverage
    operator: LESS_THAN
    error: 80%

  - metric: duplicated_lines_density
    operator: GREATER_THAN
    error: 3%

  - metric: new_vulnerabilities
    operator: GREATER_THAN
    error: 0

  - metric: new_bugs
    operator: GREATER_THAN
    error: 0

  - metric: code_smells
    operator: GREATER_THAN
    warning: 10
```

**ä¸é€šè¿‡è´¨é‡é—¨ç¦ â†’ ç¦æ­¢åˆå¹¶ PR**

---

## 4. æµ‹è¯•ç”¨ä¾‹ç®¡ç†

### 4.1 æµ‹è¯•ç”¨ä¾‹è®¾è®¡

**è®¢å•åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹**:

| ç”¨ä¾‹ID | åœºæ™¯ | è¾“å…¥ | é¢„æœŸè¾“å‡º | ä¼˜å…ˆçº§ |
|--------|------|------|---------|--------|
| TC-ORD-001 | æ­£å¸¸åˆ›å»ºè®¢å• | æœ‰æ•ˆå•†å“+å……è¶³åº“å­˜ | è®¢å•åˆ›å»ºæˆåŠŸ | P0 |
| TC-ORD-002 | åº“å­˜ä¸è¶³ | æœ‰æ•ˆå•†å“+åº“å­˜ä¸è¶³ | è¿”å›åº“å­˜ä¸è¶³é”™è¯¯ | P0 |
| TC-ORD-003 | å•†å“ä¸å­˜åœ¨ | æ— æ•ˆå•†å“ID | è¿”å›å•†å“ä¸å­˜åœ¨é”™è¯¯ | P1 |
| TC-ORD-004 | å¹¶å‘åˆ›å»ºè®¢å• | 1000å¹¶å‘è¯·æ±‚ | åº“å­˜æ‰£å‡å‡†ç¡® | P0 |
| TC-ORD-005 | Seataäº‹åŠ¡å›æ»š | æ”¯ä»˜å¤±è´¥ | åº“å­˜è‡ªåŠ¨å›æ»š | P0 |

**ä¼˜å…ˆçº§**:
- P0: æ ¸å¿ƒåŠŸèƒ½ï¼Œå¿…é¡»é€šè¿‡
- P1: é‡è¦åŠŸèƒ½ï¼Œå¿…é¡»é€šè¿‡
- P2: è¾¹ç¼˜åœºæ™¯ï¼Œå¯é€‰

### 4.2 è‡ªåŠ¨åŒ–æµ‹è¯•

**å•å…ƒæµ‹è¯•ç¤ºä¾‹**:
```java
@SpringBootTest
class InventoryServiceTest {

    @Autowired
    private InventoryService inventoryService;

    @Test
    @DisplayName("åº“å­˜æ‰£å‡æˆåŠŸ")
    void testDeductStock_Success() {
        // Given
        UUID skuId = UUID.randomUUID();
        inventoryService.initStock(skuId, 100);

        // When
        boolean result = inventoryService.deductStock(skuId, 30);

        // Then
        assertTrue(result);
        assertEquals(70, inventoryService.getStock(skuId));
    }

    @Test
    @DisplayName("åº“å­˜ä¸è¶³")
    void testDeductStock_InsufficientStock() {
        // Given
        UUID skuId = UUID.randomUUID();
        inventoryService.initStock(skuId, 10);

        // When & Then
        assertThrows(BusinessException.class, () -> {
            inventoryService.deductStock(skuId, 30);
        });
    }

    @Test
    @DisplayName("å¹¶å‘æ‰£å‡åº“å­˜")
    void testDeductStock_Concurrent() throws InterruptedException {
        // Given
        UUID skuId = UUID.randomUUID();
        inventoryService.initStock(skuId, 1000);

        // When: 100ä¸ªçº¿ç¨‹å„æ‰£å‡10ä¸ªåº“å­˜
        ExecutorService executor = Executors.newFixedThreadPool(100);
        CountDownLatch latch = new CountDownLatch(100);

        for (int i = 0; i < 100; i++) {
            executor.submit(() -> {
                try {
                    inventoryService.deductStock(skuId, 10);
                } finally {
                    latch.countDown();
                }
            });
        }

        latch.await();

        // Then: æœ€ç»ˆåº“å­˜åº”è¯¥ä¸º 0
        assertEquals(0, inventoryService.getStock(skuId));
    }
}
```

---

## 5. æ€§èƒ½æµ‹è¯•

### 5.1 æ€§èƒ½æµ‹è¯•åœºæ™¯

| åœºæ™¯ | å¹¶å‘ç”¨æˆ· | æŒç»­æ—¶é—´ | ç›®æ ‡TPS/QPS | ç›®æ ‡å»¶è¿Ÿ(P99) |
|-----|---------|---------|-------------|--------------|
| **å•†å“æœç´¢** | 5000 | 30åˆ†é’Ÿ | 50,000 QPS | < 100ms |
| **è®¢å•åˆ›å»º** | 500 | 30åˆ†é’Ÿ | 10,000 TPS | < 100ms |
| **åº“å­˜æ‰£å‡** | 1000 | 30åˆ†é’Ÿ | 20,000 TPS | < 50ms |
| **ç§’æ€åœºæ™¯** | 10000 | 1åˆ†é’Ÿ | å³°å€¼100,000 | < 200ms |

### 5.2 JMeter æµ‹è¯•è„šæœ¬

```xml
<!-- è®¢å•åˆ›å»ºæ€§èƒ½æµ‹è¯•.jmx -->
<ThreadGroup>
  <stringProp name="ThreadGroup.num_threads">500</stringProp>
  <stringProp name="ThreadGroup.ramp_time">60</stringProp>
  <stringProp name="ThreadGroup.duration">1800</stringProp>
</ThreadGroup>

<HTTPSamplerProxy>
  <stringProp name="HTTPSampler.method">POST</stringProp>
  <stringProp name="HTTPSampler.path">/api/orders</stringProp>
  <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
</HTTPSamplerProxy>

<ConstantThroughputTimer>
  <stringProp name="throughput">10000</stringProp>
</ConstantThroughputTimer>
```

### 5.3 æ€§èƒ½ç›‘æ§

**ç›‘æ§æŒ‡æ ‡**:
- **åº”ç”¨å±‚**: TPS, QPS, å“åº”æ—¶é—´, é”™è¯¯ç‡
- **JVM**: å †å†…å­˜, GCæ¬¡æ•°, GCæ—¶é—´
- **æ•°æ®åº“**: QPS, æ…¢æŸ¥è¯¢, è¿æ¥æ± ä½¿ç”¨ç‡
- **ä¸­é—´ä»¶**: Rediså‘½ä¸­ç‡, ESæŸ¥è¯¢å»¶è¿Ÿ, MQå †ç§¯

**å·¥å…·**:
- Prometheus + Grafana
- SkyWalking APM
- JMeter + InfluxDB

---

## 6. ç¼ºé™·ç®¡ç†

### 6.1 ç¼ºé™·ç­‰çº§

| ç­‰çº§ | å®šä¹‰ | ä¿®å¤æ—¶é—´ | ç¤ºä¾‹ |
|-----|------|---------|------|
| **P0 (è‡´å‘½)** | ç³»ç»Ÿå´©æºƒã€æ•°æ®ä¸¢å¤± | 2å°æ—¶ | è®¢å•æ”¯ä»˜ååº“å­˜æœªæ‰£å‡ |
| **P1 (ä¸¥é‡)** | æ ¸å¿ƒåŠŸèƒ½ä¸å¯ç”¨ | 1å¤© | å•†å“æœç´¢è¿”å›ç©ºç»“æœ |
| **P2 (ä¸€èˆ¬)** | éƒ¨åˆ†åŠŸèƒ½å—å½±å“ | 3å¤© | è®¢å•åˆ—è¡¨åŠ è½½æ…¢ |
| **P3 (è½»å¾®)** | ä½“éªŒé—®é¢˜ | 1å‘¨ | é”™è¯¯æç¤ºä¸å‹å¥½ |

### 6.2 ç¼ºé™·è·Ÿè¸ªæµç¨‹

```
å‘ç° â†’ æäº¤ â†’ ç¡®è®¤ â†’ ä¿®å¤ â†’ éªŒè¯ â†’ å…³é—­
        â†“       â†“      â†“      â†“
      Jira   å¼€å‘ç»„  å¼€å‘ç»„  æµ‹è¯•ç»„
```

### 6.3 Bug Bash

**æ—¶é—´**: æ¯ä¸ª Phase ç»“æŸå‰ 1 å¤©
**å‚ä¸äºº**: å…¨å‘˜
**å¥–åŠ±**: å‘ç° P0/P1 bug è€…å¥–åŠ± 200å…ƒ/ä¸ª

---

## 7. æŒç»­é›†æˆ (CI/CD)

### 7.1 CI Pipeline

```yaml
# .github/workflows/ci.yml
name: CI Pipeline

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up JDK 21
        uses: actions/setup-java@v4
        with:
          java-version: '21'

      - name: Build with Maven
        run: mvn clean install -DskipTests

      - name: Run Unit Tests
        run: mvn test

      - name: Run Integration Tests
        run: mvn verify -P integration-test

      - name: SonarQube Scan
        run: mvn sonar:sonar

      - name: Upload Coverage
        uses: codecov/codecov-action@v3
```

### 7.2 CD Pipeline

```yaml
# éƒ¨ç½²æµç¨‹
å¼€å‘ç¯å¢ƒ: è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¯æ¬¡ push masterï¼‰
æµ‹è¯•ç¯å¢ƒ: è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¯æ™š 2:00ï¼‰
é¢„ç”Ÿäº§: æ‰‹åŠ¨è§¦å‘
ç”Ÿäº§ç¯å¢ƒ: æ‰‹åŠ¨è§¦å‘ + å®¡æ‰¹
```

---

## 8. æµ‹è¯•ç¯å¢ƒç®¡ç†

### 8.1 ç¯å¢ƒæ¸…å•

| ç¯å¢ƒ | ç”¨é€” | æ›´æ–°é¢‘ç‡ | æ•°æ® |
|-----|------|---------|------|
| **å¼€å‘ç¯å¢ƒ** | æœ¬åœ°å¼€å‘ | å®æ—¶ | Mockæ•°æ® |
| **æµ‹è¯•ç¯å¢ƒ** | åŠŸèƒ½æµ‹è¯• | æ¯å¤© | è„±æ•ç”Ÿäº§æ•°æ® |
| **é¢„ç”Ÿäº§ç¯å¢ƒ** | æ€§èƒ½æµ‹è¯• | æ¯å‘¨ | ç”Ÿäº§æ•°æ®å‰¯æœ¬ |
| **ç”Ÿäº§ç¯å¢ƒ** | çº¿ä¸ŠæœåŠ¡ | æŒ‰éœ€ | ç”Ÿäº§æ•°æ® |

### 8.2 æµ‹è¯•æ•°æ®ç®¡ç†

**æ•°æ®å‡†å¤‡**:
- å•†å“æ•°æ®: 10,000 SKU
- ç”¨æˆ·æ•°æ®: 100,000 ç”¨æˆ·
- è®¢å•æ•°æ®: 500,000 å†å²è®¢å•

**æ•°æ®è„±æ•**:
- ç”¨æˆ·æ‰‹æœºå·: 138****1234
- ç”¨æˆ·é‚®ç®±: test***@example.com
- æ”¶è´§åœ°å€: è„±æ•å¤„ç†

---

## 9. è´¨é‡åº¦é‡

### 9.1 è´¨é‡çœ‹æ¿

**æ¯å‘¨æ›´æ–°**:

| æŒ‡æ ‡ | W1 | W2 | W3 | W4 | ç›®æ ‡ | è¶‹åŠ¿ |
|-----|----|----|----|----|------|------|
| å•å…ƒæµ‹è¯•è¦†ç›–ç‡ | 0% | 20% | 40% | 60% | 80% | â†‘ |
| Bugæ•°é‡ | 0 | 5 | 10 | 8 | < 10 | â†“ |
| P0 Bug | 0 | 1 | 0 | 0 | 0 | â†’ |
| ä»£ç è¯„å®¡ç‡ | 0% | 50% | 80% | 100% | 100% | â†‘ |

### 9.2 è´¨é‡æŠ¥å‘Š

**å‘å¸ƒé¢‘ç‡**: æ¯å‘¨äº”
**åŒ…å«å†…å®¹**:
- æœ¬å‘¨æµ‹è¯•è¿›å±•
- å‘ç°çš„ bug ç»Ÿè®¡
- ä»£ç è¦†ç›–ç‡è¶‹åŠ¿
- æ€§èƒ½æµ‹è¯•ç»“æœ
- ä¸‹å‘¨æµ‹è¯•è®¡åˆ’

---

## 10. ä¸Šçº¿æ£€æŸ¥æ¸…å•

**åŠŸèƒ½æ£€æŸ¥**:
- [ ] æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] å›å½’æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡
- [ ] å®‰å…¨æµ‹è¯•é€šè¿‡

**è´¨é‡æ£€æŸ¥**:
- [ ] ä»£ç è¦†ç›–ç‡ > 80%
- [ ] P0/P1 Bug = 0
- [ ] Sonar è´¨é‡é—¨ç¦é€šè¿‡

**æ–‡æ¡£æ£€æŸ¥**:
- [ ] API æ–‡æ¡£å®Œæ•´
- [ ] è¿ç»´æ–‡æ¡£å®Œæ•´
- [ ] å˜æ›´è®°å½•å®Œæ•´

**ç¯å¢ƒæ£€æŸ¥**:
- [ ] ç”Ÿäº§ç¯å¢ƒèµ„æºå°±ç»ª
- [ ] ç›‘æ§å‘Šè­¦é…ç½®å®Œæˆ
- [ ] å¤‡ä»½æ¢å¤æµç¨‹éªŒè¯

**åº”æ€¥å‡†å¤‡**:
- [ ] å›æ»šæ–¹æ¡ˆå‡†å¤‡
- [ ] åº”æ€¥é¢„æ¡ˆæ¼”ç»ƒ
- [ ] On-call å€¼ç­å®‰æ’

---

**æ–‡æ¡£ç»´æŠ¤**: æµ‹è¯•ç»„
**å®¡æ‰¹**: Tech Lead + PM
**ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-12-24
