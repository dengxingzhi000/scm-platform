
frog:
  mybatis:
    pagination-max-limit: 1000

# HikariCP Connection Pool Configuration
# https://github.com/brettwooldridge/HikariCP#configuration-knobs-baby
spring:
  datasource:
    hikari:
      # Connection pool sizing
      maximum-pool-size: ${HIKARI_MAX_POOL_SIZE:20}
      minimum-idle: ${HIKARI_MIN_IDLE:5}

      # Connection timeout settings
      connection-timeout: 30000  # 30 seconds (max wait for connection from pool)
      idle-timeout: 600000       # 10 minutes (max idle time before connection is retired)
      max-lifetime: 1800000      # 30 minutes (max lifetime of connection in pool)

      # Health check
      connection-test-query: SELECT 1
      validation-timeout: 5000

      # Leak detection (CRITICAL for production)
      # Logs if connection is not returned within threshold
      leak-detection-threshold: 60000  # 60 seconds

      # Pool name for monitoring
      pool-name: HikariCP-${spring.application.name:common}

      # Auto-commit (should be true for most cases)
      auto-commit: true

      # Connection initialization SQL (optional)
      # connection-init-sql: SET SESSION sql_mode='TRADITIONAL'

      # Metrics (for Prometheus/Micrometer)
      register-mbeans: true

mybatis-plus:
  type-handlers-package: com.frog.common.handler
  global-config:
    db-config:
      id-type: auto
  configuration:
    # PRODUCTION: SQL logging disabled for security and performance
    # Enable in dev/local via application-dev.yaml
    log-impl: org.apache.ibatis.logging.nologging.NoLoggingImpl
    # Map underscore to camel case
    map-underscore-to-camel-case: true
    # Cache settings
    cache-enabled: true
    lazy-loading-enabled: false
    aggressive-lazy-loading: false
